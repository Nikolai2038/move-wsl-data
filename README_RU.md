# Move WSL data

[EN](README.md) | **RU**

## Описание

Данный PowerShell-скрипт позволяет переместить данные WSL data в новое расположение.

Скрипт также помогает уменьшить размер `ext4.vhdx` (файл данных WSL), потому что по какой-то причине `docker system prune` и `docker builder prune` не уменьшают его.

## Требования

- Windows 10/11;
- PowerShell;
- WSL.

Также, необходимо иметь в два раза больше свободного места на диске, куда Вы перемещаете данные WSL, чем сами эти данные (или использовать третий аргумент для изменения директории хранения временного архива - смотреть инструкции ниже).
Это необходимо при выполнении, так как скрипт создаёт архив, а затем применяет его, создавая файл данных WSL, и только потом удаляет архив.

## Использование

1. Остановить Docker Desktop, если он используется.
2. Запустить `PowerShell`;
3. Склонировать репозиторий:

    ```powershell
    git clone https://github.com/Nikolai2038/move-wsl-data.git
    cd move-wsl-data
    ```

4. Посмотреть список доступных WSL командой и запомнить названия той, которую нужно переместить:

    ```powershell
    wsl -l -v
    ```

5. Выполнить скрипт:

    ```powershell
    ./move.ps1 <WSL name to move> <полный путь к директории, в которой будет создана папка с данными WSL> [полный путь к директории, в которой будет хранится временный архив]
    ```

## Пример

```powershell
./move.ps1 "docker-desktop-data" "D:\WSL"
```

В этом примере, после выполнения, данные WSL будут перемещены в `D:\WSL\docker-desktop-data\ext4.vhdx`.

Вы также можете запустить скрипт без параметров:

```powershell
./move.ps1
```

В этом случае PowerShell запросит ввод каждого параметра.

По умолчанию, временный архив будет сохранён в директорию, в которой будет создана папка с данными WSL.
Если Вы хотите указать другую директорию, передайте все три аргумента скрипту.
Пример:

```powershell
./move.ps1 "docker-desktop-data" "D:\WSL" "E:\temp"
```

## Развитие

Не стесняйтесь участвовать в развитии репозитория, используя [pull requests](https://github.com/Nikolai2038/move-wsl-data/pulls) или [issues](https://github.com/Nikolai2038/move-wsl-data/issues)!
